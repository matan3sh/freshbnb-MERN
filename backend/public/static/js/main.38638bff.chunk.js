(this["webpackJsonpmatan-shaviro-app"]=this["webpackJsonpmatan-shaviro-app"]||[]).push([[0],{215:function(e,t,a){e.exports=a.p+"static/media/logo.b59cfb4c.png"},218:function(e,t,a){e.exports=a.p+"static/media/spinner.49db5812.gif"},234:function(e,t,a){e.exports=a(380)},248:function(e,t){},250:function(e,t){},262:function(e,t){},264:function(e,t){},292:function(e,t){},294:function(e,t){},295:function(e,t){},301:function(e,t){},303:function(e,t){},321:function(e,t){},323:function(e,t){},335:function(e,t){},338:function(e,t){},375:function(e,t,a){},380:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(21),i=a.n(c),o=a(82),s=a(15),u=a(8),m=a(211),p=a.n(m),d=a(33),E=a.n(d),v=function(e){var t=[{title:"Error!",detail:"Ooops, something went wrong!"}];return e&&e.data&&e.data.errors&&(t=e.data.errors),t},f=a(76),g=a(77),h=a(78),b=a.n(h),y=function(){function e(){Object(f.a)(this,e),this.axiosInstace=null,this.initInstance()}return Object(g.a)(e,[{key:"initInstance",value:function(){this.axiosInstace=b.a.create({baseURL:"http://localhost:3000/api",timeout:5e3}),this.axiosInstace.interceptors.request.use((function(e){var t=localStorage.getItem("freshbnb_token");return t&&(e.headers.Authorization="Berear ".concat(t)),e}))}},{key:"freshbnbAxios",get:function(){return this.axiosInstace}}]),e}(),_=new y,N=_.freshbnbAxios,O=l.a.createContext,w=l.a.useContext,j=O(null),R=Object(u.b)()((function(e){var t=e.children,a=e.dispatch,n=function(e){return e&&E()().isBefore(r(e))},r=function(e){return E.a.unix(e.exp)},c=function(){return localStorage.getItem("freshbnb_token")},i=function(e){return p.a.decode(e)},o={login:function(e){return(t=e,N.post("/users/login",t).then((function(e){return e.data})).catch((function(e){return Promise.reject(v(e.response||{}))}))).then((function(e){localStorage.setItem("freshbnb_token",e);var t=i(e);return a({type:"USER_AUTHENTICATED",payload:t}),e}));var t},logout:function(){localStorage.removeItem("freshbnb_token"),a({type:"USER_LOGOUT"})},checkAuthState:function(){var e=i(c());e&&n(e)&&a({type:"USER_AUTHENTICATED",payload:e})},isAuthenticated:function(){var e=i(c());return e&&n(e)}};return l.a.createElement(j.Provider,{value:o},t)})),k=function(){return w(j)},x=function(e){var t=e.component,a=Object(o.a)(e,["component"]),n=k();return l.a.createElement(s.b,Object.assign({},a,{render:function(e){return n.isAuthenticated()?l.a.createElement(t,Object.assign({},a,e)):l.a.createElement(s.a,{to:{pathname:"/login"}})}}))},A=function(e){var t=e.component,a=Object(o.a)(e,["component"]),n=k();return l.a.createElement(s.b,Object.assign({},a,{render:function(e){return n.isAuthenticated()?l.a.createElement(s.a,{to:{pathname:"/"}}):l.a.createElement(t,Object.assign({},a,e))}}))},C=a(5),S=a(9),I=a(396),B=a(177),L=a.n(B),D=a(179),T=a.n(D),P=a(180),M=a.n(P),q=a(181),U=a.n(q),F=a(182),Y=a.n(F),G=a(183),V=a.n(G),K=a(184),H=a.n(K),W=a(185),$=a.n(W),z=a(186),Z=a.n(z),J=a(187),X=a.n(J),Q=a(188),ee=a.n(Q),te=a(189),ae=a.n(te),ne=a(190),re=a.n(ne),le=a(191),ce=a.n(le),ie=a(192),oe=a.n(ie),se=a(193),ue=a.n(se),me=a(194),pe=a.n(me),de=a(195),Ee=a.n(de),ve=a(196),fe=a.n(ve),ge=a(197),he=a.n(ge),be=a(198),ye=a.n(be),_e=a(199),Ne=a.n(_e),Oe=a(200),we=a.n(Oe),je=a(201),Re=a.n(je),ke=a(202),xe=a.n(ke),Ae=a(203),Ce=a.n(Ae),Se=a(204),Ie=a.n(Se),Be=a(205),Le=a.n(Be),De=a(206),Te=a.n(De),Pe=a(207),Me=a.n(Pe),qe=a(208),Ue=a.n(qe),Fe=function(){var e=k();return l.a.createElement("div",{className:"dropdown"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(C.b,{to:"/all/browse"},l.a.createElement(we.a,null),"Browse")),l.a.createElement("li",null,l.a.createElement(C.b,{to:"/manage"},l.a.createElement(he.a,null),"Manage")),l.a.createElement("li",null,l.a.createElement("a",{href:"/",onClick:function(){return e.logout()}},l.a.createElement(ye.a,null),"Logout"))))},Ye=function(){var e=Object(r.useState)(""),t=Object(S.a)(e,2),a=t[0],n=t[1],c=Object(s.g)();return l.a.createElement("div",{className:"header__center"},l.a.createElement("input",{onKeyPress:function(e){"Enter"===e.key&&(""!==a?(c.replace("/".concat(a,"/browse")),n("")):(c.replace("/all/browse"),n("")))},value:a,onChange:function(e){return n(e.target.value)},type:"text",placeholder:"Search By City"}),l.a.createElement(L.a,{className:"header__searchIcon",onClick:function(){""===a?(c.replace("/all/browse"),n("")):(c.replace("/".concat(a,"/browse")),n(""))}}))},Ge=a(215),Ve=a.n(Ge),Ke=Object(u.b)((function(e){return{user:e.authApp.user,isAuth:e.authApp.isAuth}}),null)((function(e){var t=e.user,a=e.isAuth,n=Object(r.useState)(!1),c=Object(S.a)(n,2),i=c[0],o=c[1];return l.a.createElement("div",{className:"header"},l.a.createElement(C.b,{to:"/"},l.a.createElement("img",{className:"header__logo",src:Ve.a,alt:"logo"})),l.a.createElement(Ye,null),l.a.createElement("div",{className:"header__right"},!a&&l.a.createElement("p",null,l.a.createElement(C.b,{to:"/login"},l.a.createElement("span",null,"Login")),"/",l.a.createElement(C.b,{to:"/register"},l.a.createElement("span",null,"Register"))),l.a.createElement("div",{className:"header__right-icons"}),a&&t&&l.a.createElement("div",{className:"header__username",onClick:function(){return o(!i)}},l.a.createElement("span",null,t.username),l.a.createElement(T.a,{className:"header__right-icons-plus"}),l.a.createElement(I.a,{className:"header__avatar"}),i&&l.a.createElement(Fe,null))))})),He=Object(u.b)((function(e){return{user:e.authApp.user,isAuth:e.authApp.isAuth}}),null)((function(e){var t=e.user,a=e.isAuth,n=k();return l.a.createElement("nav",{className:"navBottom"},a&&t?l.a.createElement(l.a.Fragment,null,l.a.createElement(C.c,{to:"/",exact:!0,className:"navBottom__link",activeClassName:"navBottom__active"},l.a.createElement(pe.a,null),l.a.createElement("span",{className:"navBottom__text"},"Home")),l.a.createElement(C.c,{to:"/all/browse",className:"navBottom__link",activeClassName:"navBottom__active"},l.a.createElement(Ne.a,null),l.a.createElement("span",{className:"navBottom__text"},"Browse")),l.a.createElement(C.c,{to:"/manage",exact:!0,className:"navBottom__link",activeClassName:"navBottom__active"},l.a.createElement(he.a,null),l.a.createElement("span",{className:"navBottom__text"},"Manage")),l.a.createElement("a",{href:"/",className:"navBottom__link",onClick:function(){return n.logout()}},l.a.createElement(ye.a,null),l.a.createElement("span",{className:"navBottom__text"},"Logout"))):l.a.createElement(l.a.Fragment,null,l.a.createElement(C.c,{to:"/",exact:!0,className:"navBottom__link",activeClassName:"navBottom__active"},l.a.createElement(pe.a,null),l.a.createElement("span",{className:"navBottom__text"},"Home")),l.a.createElement(C.c,{to:"/register",className:"navBottom__link",activeClassName:"navBottom__active"},l.a.createElement(Ee.a,null),l.a.createElement("span",{className:"navBottom__text"},"Become a Host")),l.a.createElement(C.c,{to:"/login",exact:!0,className:"navBottom__link",activeClassName:"navBottom__active"},l.a.createElement(fe.a,null),l.a.createElement("span",{className:"navBottom__text"},"Login"))))})),We=function(){return l.a.createElement("div",{className:"footer"},l.a.createElement("p",null,"\u2022 2020 Freshbnb (Airbnb Like) \xa9 All right reserved"),l.a.createElement("p",null,"Matan Shaviro \u2022 Linkedin"))},$e=a(394),ze=function(){var e=Object(s.g)();return l.a.createElement("div",{className:"banner"},l.a.createElement("div",{className:"banner__info"},l.a.createElement("h1",null,"Get out and stretch your imagination"),l.a.createElement("h5",null,"Plan a different kind of getaway to uncover the hidden gems near you."),l.a.createElement($e.a,{onClick:function(){return e.push("/all/browse")},variant:"outlined"},"Explore Nearby")))},Ze=function(e){var t=e.card;return l.a.createElement(C.b,{to:"/all/browse"},l.a.createElement("div",{className:"card"},l.a.createElement("img",{src:t.url,alt:""}),l.a.createElement("div",{className:"card__info"},l.a.createElement("h2",null,t.title),l.a.createElement("h4",null,t.description),t.price&&l.a.createElement("h3",null,t.price))))},Je=function(){var e=Object(s.h)().pathname;return Object(r.useEffect)((function(){window.scrollTo(0,0)}),[e]),null},Xe=a(218),Qe=a.n(Xe),et={width:"100%",objectFit:"contain",display:"flex",margin:"auto",justifyContent:"center",alignItems:"center"},tt=function(){return l.a.createElement("img",{src:Qe.a,alt:"Loading...",style:et})},at=[{url:"https://a0.muscache.com/im/pictures/eb9c7c6a-ee33-414a-b1ba-14e8860d59b3.jpg?im_w=720",title:"Online Experiences",description:"Unique activities we can do together, led by a world of hosts."},{url:"https://a0.muscache.com/im/pictures/15159c9c-9cf1-400e-b809-4e13f286fa38.jpg?im_w=720",title:"Unique stays",description:"Spaces that are more than just a place to sleep."},{url:"https://a0.muscache.com/im/pictures/fdb46962-10c1-45fc-a228-d0b055411448.jpg?im_w=720",title:"Entire homes",description:"Comfortable private places, with room for friends or family."},{url:"https://media.nomadicmatt.com/2019/airbnb_breakup3.jpg",title:"3 Bedroom Flat in Bournemouth",description:"Superhost with a stunning view of the beachside in Sunny Bournemouth",price:"\xa3130/night"},{url:"https://thespaces.com/wp-content/uploads/2017/08/Courtesy-of-Airbnb.jpg",title:"Penthouse in London",description:"Enjoy the amazing sights of London with this stunning penthouse",price:"\xa3350/night"},{url:"https://media.nomadicmatt.com/2018/apartment.jpg",title:"1 Bedroom apartment",description:"Superhost with great amenities and a fabolous shopping complex nearby",price:"\xa370/night"}],nt=Object(u.b)((function(e){return{}}),{})((function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Je,null),l.a.createElement("div",{className:"home"},l.a.createElement(ze,null),l.a.createElement("div",{className:"home__section"},at.map((function(e,t){return l.a.createElement(Ze,{card:e,key:t})})))))})),rt=a(2),lt=a.n(rt),ct=a(4),it=_.freshbnbAxios,ot={query:function(){var e=Object(ct.a)(lt.a.mark((function e(t){var a,n;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t&&"all"!==t?"/rentals?city=".concat(t):"/rentals",e.prev=1,e.next=4,it.get(a);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),getById:function(){var e=Object(ct.a)(lt.a.mark((function e(t){var a;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,it.get("/rentals/".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),add:function(){var e=Object(ct.a)(lt.a.mark((function e(t){var a;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,it.post("/rentals",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},st=function(e){var t=e.rental;return l.a.createElement(C.b,{to:"/rentals/".concat(t._id),id:"item"},l.a.createElement("div",{className:"browseItem"},l.a.createElement("img",{src:t.image.url,alt:""}),l.a.createElement(U.a,{className:"browseItem__heart"}),l.a.createElement("div",{className:"browseItem__info"},l.a.createElement("div",{className:"browseItem__infoTop"},l.a.createElement("p",{className:"browseItem__city"},l.a.createElement(ue.a,{className:"browseItem__city-icon"}),t.street,", ",t.city," "),l.a.createElement("h3",null,t.title),l.a.createElement("p",{className:"browseItem__category"},t.shared?"Shared ":"",t.category),l.a.createElement("p",null,"____"),l.a.createElement("p",null,t.description)),l.a.createElement("div",{className:"browseItem__infoBottom"},l.a.createElement("div",{className:"browseItem__stars"},l.a.createElement(Y.a,{className:"browseItem__star"}),l.a.createElement("p",null,l.a.createElement("strong",null,t.star," ",l.a.createElement("span",null,"(2)")))),l.a.createElement("div",{className:"browseItems__price"},l.a.createElement("h2",null,l.a.createElement("span",null,t.dailyPrice,"$")," / night"),l.a.createElement("p",null,t.numOfRooms," Rooms Available"))))))},ut={loadRentals:function(e){return function(){var t=Object(ct.a)(lt.a.mark((function t(a){var n;return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ot.query(e);case 3:n=t.sent,a({type:"SET_RENTALS",payload:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},clearRentals:function(){return function(){var e=Object(ct.a)(lt.a.mark((function e(t){return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"CLEAR_RENTALS"})}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},mt=Object(u.b)((function(e){return{rentals:e.mainApp.rentals}}),ut)((function(e){var t=e.rentals,a=e.loadRentals,n=e.location,c=e.clearRentals;Object(r.useEffect)((function(){return a(n),function(){c()}}),[a,n,c]);return l.a.createElement("div",{className:"browseList"},null===t?l.a.createElement(tt,null):(null===t||void 0===t?void 0:t.length)?void 0:l.a.createElement("h1",{className:"no-rentals"},"There Are No Rentals At ",l.a.createElement("span",null,n)),null===t||void 0===t?void 0:t.map((function(e,t){return l.a.createElement(st,{rental:e,key:t})})))})),pt=function(e){var t=e.match,a=Object(r.useState)(null),n=Object(S.a)(a,2),c=n[0],i=n[1];return Object(r.useEffect)((function(){var e=t.params.location;i(e)}),[t.params,i]),l.a.createElement("div",{className:"browse"},l.a.createElement("div",{className:"browse__info"},l.a.createElement("h1",null,"all"===c?"Stays Nearby":"Your Home in ".concat(c)),l.a.createElement($e.a,{variant:"outlined"},"Cancellation"),l.a.createElement($e.a,{variant:"outlined"},"Type Of Place"),l.a.createElement($e.a,{variant:"outlined"},"Price"),l.a.createElement($e.a,{variant:"outlined"},"Rooms and Beds"),l.a.createElement($e.a,{variant:"outlined"},"Housekeeping")),c&&l.a.createElement(mt,{location:c}))},dt=a(39),Et=a(22),vt=function(e){var t=e.text,a=e.type;return l.a.createElement("button",{className:"button",type:a},t)},ft=_.freshbnbAxios,gt={add:function(){var e=Object(ct.a)(lt.a.mark((function e(t){var a;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ft.post("/bookings",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(v(e.t0.response||{})));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),getByRental:function(){var e=Object(ct.a)(lt.a.mark((function e(t){var a;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ft.get("/bookings?rental=".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},ht=a(35),bt={clearErrors:function(){return function(){var e=Object(ct.a)(lt.a.mark((function e(t){return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SET_ERRORS",payload:null});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},yt=Object(u.b)((function(e){return{errors:e.bookingsApp.errors}}),bt)((function(e){var t=e.errors,a=e.clearErrors;null!==t&&setTimeout((function(){a()}),1e4);return l.a.createElement(l.a.Fragment,null,void(null!==t&&t.map((function(e){return ht.c.error(e.detail)}))))})),_t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Nt=function(e){var t=e.children;return l.a.createElement("div",{className:"input__notValid"},t)},Ot=function(e){var t=e.onSubmit,a=Object(dt.b)(),n=a.register,r=a.handleSubmit,c=a.errors;return l.a.createElement("form",{onSubmit:r(t)},l.a.createElement("div",{className:"inputs"},l.a.createElement("div",{className:"input"},l.a.createElement("input",{ref:n({required:"Email is Required",pattern:{value:_t,message:"Not Valid Email Format"}}),type:"text",name:"email",id:"email",placeholder:"Email"}),l.a.createElement(Et.a,{as:l.a.createElement(Nt,null),errors:c,name:"email"},(function(e){var t=e.message;return l.a.createElement("p",null,t)}))),l.a.createElement("div",{className:"input"},l.a.createElement("input",{ref:n({required:"Password is Required",minLength:{value:6,message:"Password must 6 characters minimum"}}),type:"password",name:"password",id:"password",placeholder:"Password"}),l.a.createElement(Et.a,{as:l.a.createElement(Nt,null),errors:c,name:"password"},(function(e){var t=e.message;return l.a.createElement("p",null,t)})))),l.a.createElement("p",null,"Dont have an account? ",l.a.createElement(C.b,{to:"/register"},"Register")," "),l.a.createElement(vt,{type:"submit",text:"Continue"}))},wt=function(e,t){return function(a){return t()[e]===a}},jt=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Rt=function(e){var t=e.onSubmit,a=Object(dt.b)(),n=a.register,r=a.handleSubmit,c=a.errors,i=a.getValues;return l.a.createElement("form",{onSubmit:r(t)},l.a.createElement("div",{className:"inputs"},l.a.createElement("div",{className:"input"},l.a.createElement("input",{ref:n({required:!0,minLength:3}),type:"text",name:"username",id:"username",placeholder:"Username"}),c.username&&l.a.createElement("div",{className:"input__notValid"},"required"===c.username.type&&"Username is Required","minLength"===c.username.type&&"Username must 3 characters minimum")),l.a.createElement("div",{className:"input"},l.a.createElement("input",{ref:n({required:!0,pattern:jt}),type:"email",name:"email",id:"email",placeholder:"Email"}),c.email&&l.a.createElement("div",{className:"input__notValid"},"required"===c.email.type&&"Email is Required","pattern"===c.email.type&&"Not Valid Email Format")),l.a.createElement("div",{className:"input"},l.a.createElement("input",{ref:n({required:!0,minLength:6}),type:"password",name:"password",id:"password",placeholder:"Password"}),c.password&&l.a.createElement("div",{className:"input__notValid"},"required"===c.password.type&&"Password is Required","minLength"===c.password.type&&"Password must 6 characters minimum")),l.a.createElement("div",{className:"input"},l.a.createElement("input",{ref:n({required:!0,minLength:6,validate:{sameAs:wt("password",i)}}),type:"password",name:"passwordConfirm",id:"passwordConfirm",placeholder:"ConfirmPassword"}),c.passwordConfirm&&l.a.createElement("div",{className:"input__notValid"},"required"===c.passwordConfirm.type&&"Password Confirmation is Required","minLength"===c.passwordConfirm.type&&"Password Confirmation must 6 characters minimum","sameAs"===c.passwordConfirm.type&&"Password Confirmation must match with Password"))),l.a.createElement("p",null,"Already have an account? ",l.a.createElement(C.b,{to:"/login"},"Login")),l.a.createElement(vt,{text:"Continue",type:"submit"}))},kt=a(224),xt=a(223),At=_.freshbnbAxios,Ct=function(e){Object(kt.a)(a,e);var t=Object(xt.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).changeImageStatus=function(t){return e.setState({imgStatus:t})},e.handleImageLoad=function(t){var a=t.target.result;e.setState({imgBase64:a,imgStatus:"LOADED"})},e.listenToFileLoading=function(){e.fileReader.addEventListener("load",e.handleImageLoad)},e.removeFileLoadListener=function(){e.fileReader.removeEventListener("load",e.handleImageLoad)},e.handleChange=function(t){e.selectedImg=t.target.files[0],e.fileReader.readAsDataURL(e.selectedImg)},e.cancelImage=function(){e.inputRef.current.value=null,e.selectedImg=null,e.setState({imgBase64:"",imgStatus:"INIT"})},e.handleImageUpload=function(){e.changeImageStatus("PENDING"),function(e){var t=new FormData;return t.append("image",e),At.post("/image-upload",t).then((function(e){return e.data}))}(e.selectedImg).then((function(t){e.props.onFileUpload(t._id),e.changeImageStatus("UPLOADED")})).catch((function(){return e.changeImageStatus("ERROR")}))},e.inputRef=l.a.createRef(),e.fileReader=new FileReader,e.selectedImg=null,e.state={imgBase64:"",imgStatus:"INIT"},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.listenToFileLoading()}},{key:"componentWillUnmount",value:function(){this.removeFileLoadListener()}},{key:"render",value:function(){var e=this.state,t=e.imgBase64,a=e.imgStatus;return l.a.createElement("div",{className:"input"},l.a.createElement("label",null,"Cover Image"),l.a.createElement("input",{type:"file",accept:".jpg, .png, .jpeg",onChange:this.handleChange,ref:this.inputRef}),t&&l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{src:t,alt:"preview",className:"img-preview"}),"PENDING"===a&&l.a.createElement(tt,null),"UPLOADED"===a&&l.a.createElement("span",null,"Image upload successfuly",l.a.createElement("span",{role:"img","aria-label":"icon"},"\u2705"," ")),"ERROR"===a&&l.a.createElement("span",null,"Image upload failed",l.a.createElement("span",{role:"img","aria-label":"icon"},"\u274c")),l.a.createElement("div",{className:"img-buttons"},"LOADED"===a&&l.a.createElement("button",{onClick:this.handleImageUpload},"Upload"),"UPLOADED"!==a&&l.a.createElement("button",{onClick:this.cancelImage,className:"img-buttons-cancel"},"Cancel"))))}}]),a}(l.a.Component),St=function(e){var t=e.children;return l.a.createElement("div",{className:"input__notValid"},t)},It=function(e){var t=e.onSubmit,a=Object(dt.b)(),n=a.register,c=a.handleSubmit,i=a.errors,o=a.setValue;return Object(r.useEffect)((function(){n({name:"image"})}),[n]),l.a.createElement("form",{onSubmit:c(t)},l.a.createElement("div",{className:"inputs"},l.a.createElement("div",{className:"input"},l.a.createElement("input",{ref:n({required:"Title is Required",maxLength:{value:128,message:"Title must be 128 characters maximum"}}),type:"text",name:"title",id:"title",placeholder:"Name"}),l.a.createElement(Et.a,{as:l.a.createElement(St,null),errors:i,name:"title"},(function(e){var t=e.message;return l.a.createElement("p",null,t)}))),l.a.createElement("div",{className:"input"},l.a.createElement("select",{ref:n({required:"Category is Required"}),name:"category",id:"category",placeholder:"Category"},l.a.createElement("option",{selected:!0,disabled:!0,defaultValue:!0},"Choose Category"),l.a.createElement("option",{value:"apartment"},"Apartment"),l.a.createElement("option",{value:"condo"},"Condo"),l.a.createElement("option",{value:"apartment"},"House")),l.a.createElement(Et.a,{as:l.a.createElement(St,null),errors:i,name:"category"},(function(e){var t=e.message;return l.a.createElement("p",null,t)}))),l.a.createElement("div",{className:"input"},l.a.createElement("div",{className:"icon-input"},l.a.createElement("input",{ref:n({required:"City is Required"}),type:"text",name:"city",id:"city",placeholder:"City"}),l.a.createElement(xe.a,null)),l.a.createElement(Et.a,{as:l.a.createElement(St,null),errors:i,name:"city"},(function(e){var t=e.message;return l.a.createElement("p",null,t)}))),l.a.createElement("div",{className:"input"},l.a.createElement("div",{className:"icon-input"},l.a.createElement("input",{ref:n({required:"Street is Required",minLength:{value:4,message:"Street must 4 characters minimum"}}),type:"text",name:"street",id:"street",placeholder:"Street"}),l.a.createElement(Ce.a,null)),l.a.createElement(Et.a,{as:l.a.createElement(St,null),errors:i,name:"street"},(function(e){var t=e.message;return l.a.createElement("p",null,t)}))),l.a.createElement("div",{className:"input"},l.a.createElement("input",{ref:n({required:"Number of Rooms is Required"}),type:"number",name:"numOfRooms",id:"numOfRooms",placeholder:"Number of Rooms"}),l.a.createElement(Et.a,{as:l.a.createElement(St,null),errors:i,name:"numOfRooms"},(function(e){var t=e.message;return l.a.createElement("p",null,t)}))),l.a.createElement("div",{className:"input"},l.a.createElement("textarea",{ref:n({required:"Description is Required"}),rows:"8",type:"text",name:"description",id:"description",placeholder:"Description"}),l.a.createElement(Et.a,{as:l.a.createElement(St,null),errors:i,name:"description"},(function(e){var t=e.message;return l.a.createElement("p",null,t)}))),l.a.createElement("div",{className:"input"},l.a.createElement("select",{ref:n,name:"shared",id:"shared",placeholder:"Shared"},l.a.createElement("option",{disabled:!0,defaultValue:!0,selected:!0},"Shared Rental?"),l.a.createElement("option",{value:!0},"Yes"),l.a.createElement("option",{value:!1},"No"))),l.a.createElement(Ct,{onFileUpload:function(e){return o("image",e)}}),l.a.createElement("div",{className:"input "},l.a.createElement("div",{className:"icon-input"},l.a.createElement("input",{ref:n({required:"Image is Required"}),type:"text",name:"image1",id:"image1",placeholder:"Image-1 URL"}),l.a.createElement(Ie.a,null)),l.a.createElement(Et.a,{as:l.a.createElement(St,null),errors:i,name:"image1"},(function(e){var t=e.message;return l.a.createElement("p",null,t)}))),l.a.createElement("div",{className:"input"},l.a.createElement("div",{className:"icon-input"},l.a.createElement("input",{ref:n({required:"Image is Required"}),type:"text",name:"image2",id:"image2",placeholder:"Image-2 URL"}),l.a.createElement(Ie.a,null)),l.a.createElement(Et.a,{as:l.a.createElement(St,null),errors:i,name:"image2"},(function(e){var t=e.message;return l.a.createElement("p",null,t)}))),l.a.createElement("div",{className:"input"},l.a.createElement("div",{className:"icon-input"},l.a.createElement("input",{ref:n({required:"Image is Required"}),type:"text",name:"image3",id:"image3",placeholder:"Image-3 URL"}),l.a.createElement(Ie.a,null)),l.a.createElement(Et.a,{as:l.a.createElement(St,null),errors:i,name:"image3"},(function(e){var t=e.message;return l.a.createElement("p",null,t)}))),l.a.createElement("div",{className:"input "},l.a.createElement("div",{className:"icon-input"},l.a.createElement("input",{ref:n({required:"Image is Required"}),type:"text",name:"image4",id:"image4",placeholder:"Image-4 URL"}),l.a.createElement(Ie.a,null)),l.a.createElement(Et.a,{as:l.a.createElement(St,null),errors:i,name:"image4"},(function(e){var t=e.message;return l.a.createElement("p",null,t)}))),l.a.createElement("div",{className:"input "},l.a.createElement("div",{className:"icon-input"},l.a.createElement("input",{ref:n({required:"Daily Price is Required"}),type:"number",min:"0",name:"dailyPrice",id:"dailyPrice",placeholder:"Daily Price"}),l.a.createElement(Re.a,null)),l.a.createElement(Et.a,{as:l.a.createElement(St,null),errors:i,name:"dailyPrice"},(function(e){var t=e.message;return l.a.createElement("p",null,t)})))),l.a.createElement(vt,{type:"submit",text:"Add"}))},Bt=a(3),Lt=a(13),Dt=function(e){var t=e.onSubmit,a=e.rentalToUpdate,n=Object(r.useState)({title:null===a||void 0===a?void 0:a.title,category:null===a||void 0===a?void 0:a.category,city:null===a||void 0===a?void 0:a.city,street:null===a||void 0===a?void 0:a.street,numOfRooms:null===a||void 0===a?void 0:a.numOfRooms,description:null===a||void 0===a?void 0:a.description,shared:null===a||void 0===a?void 0:a.shared,image:null===a||void 0===a?void 0:a.image,images:Object(Lt.a)(null===a||void 0===a?void 0:a.images),dailyPrice:null===a||void 0===a?void 0:a.dailyPrice}),c=Object(S.a)(n,2),i=c[0],o=c[1];return l.a.createElement("form",{onSubmit:function(e){return t(e,i)}},l.a.createElement("div",{className:"inputs"},l.a.createElement("div",{className:"input"},l.a.createElement("input",{type:"text",name:"title",value:i.title,onChange:function(e){return o(Object(Bt.a)(Object(Bt.a)({},i),{},{title:e.target.value}))},placeholder:"Name"})),l.a.createElement("div",{className:"input"},l.a.createElement("select",{name:"category",onChange:function(e){return o(Object(Bt.a)(Object(Bt.a)({},i),{},{category:e.target.value}))},placeholder:"Category",value:i.category},l.a.createElement("option",{selected:!0,disabled:!0},"Choose Category"),l.a.createElement("option",{value:"apartment"},"Apartment"),l.a.createElement("option",{value:"condo"},"Condo"),l.a.createElement("option",{value:"apartment"},"House"))),l.a.createElement("div",{className:"input"},l.a.createElement("div",{className:"icon-input"},l.a.createElement("input",{type:"text",name:"city",value:i.city,onChange:function(e){return o(Object(Bt.a)(Object(Bt.a)({},i),{},{city:e.target.value}))},placeholder:"City"}),l.a.createElement(xe.a,null))),l.a.createElement("div",{className:"input"},l.a.createElement("div",{className:"icon-input"},l.a.createElement("input",{type:"text",name:"street",value:i.street,onChange:function(e){return o(Object(Bt.a)(Object(Bt.a)({},i),{},{street:e.target.value}))},placeholder:"Street"}),l.a.createElement(Ce.a,null))),l.a.createElement("div",{className:"input"},l.a.createElement("input",{type:"number",name:"numOfRooms",value:i.numOfRooms,onChange:function(e){return o(Object(Bt.a)(Object(Bt.a)({},i),{},{numOfRooms:parseInt(e.target.value)}))},placeholder:"Number of Rooms"})),l.a.createElement("div",{className:"input"},l.a.createElement("textarea",{rows:"8",type:"text",name:"description",value:i.description,onChange:function(e){return o(Object(Bt.a)(Object(Bt.a)({},i),{},{description:e.target.value}))},placeholder:"Description"})),l.a.createElement("div",{className:"input"},l.a.createElement("select",{name:"shared",onChange:function(e){return o(Object(Bt.a)(Object(Bt.a)({},i),{},{shared:e.target.value}))},placeholder:"Shared",value:i.shared},l.a.createElement("option",{disabled:!0,selected:!0},"Shared Rental?"),l.a.createElement("option",{value:!0},"Yes"),l.a.createElement("option",{value:!1},"No"))),l.a.createElement(Ct,{onFileUpload:function(e){return o(Object(Bt.a)(Object(Bt.a)({},i),{},{image:e}))}}),l.a.createElement("div",{className:"input "},l.a.createElement("div",{className:"icon-input"},l.a.createElement("input",{type:"text",name:"image1",value:i.images[0],onChange:function(e){return o(Object(Bt.a)(Object(Bt.a)({},i),{},{image1:e.target.value}))},placeholder:"Image-1 URL"}),l.a.createElement(Ie.a,null))),l.a.createElement("div",{className:"input"},l.a.createElement("div",{className:"icon-input"},l.a.createElement("input",{type:"text",name:"image2",value:i.images[1],onChange:function(e){return o(Object(Bt.a)(Object(Bt.a)({},i),{},{image2:e.target.value}))},placeholder:"Image-2 URL"}),l.a.createElement(Ie.a,null))),l.a.createElement("div",{className:"input"},l.a.createElement("div",{className:"icon-input"},l.a.createElement("input",{type:"text",name:"image3",value:i.images[2],onChange:function(e){return o(Object(Bt.a)(Object(Bt.a)({},i),{},{image3:e.target.value}))},placeholder:"Image-3 URL"}),l.a.createElement(Ie.a,null))),l.a.createElement("div",{className:"input "},l.a.createElement("div",{className:"icon-input"},l.a.createElement("input",{type:"text",name:"image4",value:i.images[3],onChange:function(e){return o(Object(Bt.a)(Object(Bt.a)({},i),{},{image4:e.target.value}))},placeholder:"Image-4 URL"}),l.a.createElement(Ie.a,null))),l.a.createElement("div",{className:"input "},l.a.createElement("div",{className:"icon-input"},l.a.createElement("input",{type:"number",min:"0",name:"dailyPrice",value:i.dailyPrice,onChange:function(e){return o(Object(Bt.a)(Object(Bt.a)({},i),{},{dailyPrice:parseInt(e.target.value)}))},placeholder:"Daily Price"}),l.a.createElement(Re.a,null)))),l.a.createElement(vt,{type:"submit",text:"Update"}))},Tt=(n=function(e){var t=e.auth,a=Object(s.g)();return l.a.createElement("div",{className:"auth__container"},l.a.createElement("div",{className:"auth"},l.a.createElement("div",{className:"auth__header"},l.a.createElement("p",null,"Log in")),l.a.createElement("div",{className:"auth__body"},l.a.createElement(Ot,{onSubmit:function(e){t.login(e).then((function(e){return a.push("/")})).catch((function(e){e.map((function(e){return ht.c.error(e.detail)}))}))}}))))},function(e){return l.a.createElement(j.Consumer,null,(function(t){return l.a.createElement(n,Object.assign({},e,{auth:t}))}))}),Pt=function(){var e=Object(s.g)();return l.a.createElement("div",{className:"auth__container"},l.a.createElement("div",{className:"auth"},l.a.createElement("div",{className:"auth__header"},l.a.createElement("p",null,"Register")),l.a.createElement("div",{className:"auth__body"},l.a.createElement(Rt,{onSubmit:function(t){var a;(a=t,N.post("/users/register",a).catch((function(e){return Promise.reject(v(e.response||{}))}))).then((function(){e.push("/login"),ht.c.success("You have successfully registered")})).catch((function(e){e.map((function(e){return ht.c.error(e.detail)}))}))}}))))},Mt=_.freshbnbAxios,qt={getByRental:function(){var e=Object(ct.a)(lt.a.mark((function e(t){var a;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mt.get("/reviews/".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),add:function(){var e=Object(ct.a)(lt.a.mark((function e(t){var a;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mt.post("/reviews",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},Ut=function(e){var t=e.coverImage,a=e.images,n=Object(r.useState)(!1),c=Object(S.a)(n,2),i=c[0],o=c[1],s=Object(r.useState)(""),u=Object(S.a)(s,2),m=u[0],p=u[1],d=function(e){e.target.src||(o(!1),p(""))},E=function(e){o(!0),p(e),window.innerWidth="100vw"};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"rentalDetail__gallery"},l.a.createElement("img",{src:t,alt:"main",className:"rentalDetail__gallery-main",onClick:function(){return E(t)}}),l.a.createElement("div",{className:"rentalDetail__gallery-images"},null===a||void 0===a?void 0:a.map((function(e,t){return l.a.createElement("img",{src:e,alt:"",key:t,onClick:function(){return E(e)}})})))),l.a.createElement("div",{onClick:function(e){return d(e)},id:"lightbox",className:"".concat(i?"active":"")},l.a.createElement("span",{onClick:function(e){return d(e)}},"X"),l.a.createElement("img",{src:m,alt:""})))},Ft=function(e){var t=e.margin;return l.a.createElement(C.b,{to:"/all/browse"},l.a.createElement("div",{className:"rentalDetail__back ".concat(t&&t)},l.a.createElement(oe.a,{className:"rentalDetail__back-icon"})," ",l.a.createElement("span",null,"Back to Rentals")))},Yt=function(e){var t=e.title,a=(e.star,e.city),n=e.street,r=e.rate,c=e.length;return l.a.createElement("div",{className:"rentalDetail__header"},l.a.createElement("div",{className:"rentalDetail_left"},l.a.createElement("h1",null,t),l.a.createElement("div",{className:"rentalDetail__subtitle"},l.a.createElement(Y.a,{className:"rentalDetail__star"}),l.a.createElement("p",null,l.a.createElement("strong",null,r.toFixed(1)),l.a.createElement("span",null,"(",c,")")),l.a.createElement("span",null,"\xb7"),l.a.createElement("span",{className:"rentalDetail__location"},l.a.createElement(ue.a,{className:"browseItem__city-icon"}),n,", ",a))),l.a.createElement("div",{className:"rentalDetail__right"},l.a.createElement(U.a,{className:"rentalDetail__heart"}),l.a.createElement("span",null,"Save")))},Gt=a(219),Vt=a.n(Gt),Kt=a(47),Ht=a.n(Kt),Wt=l.a.createContext,$t=l.a.useContext,zt=Wt(null),Zt=function(e){var t=e.children,a=e.apiKey,n=Object(r.useRef)({}),c=function(e){return e.replace(/\s/g,"").toLowerCase()},i=function(e){var t="https://api.tomtom.com/search/2/geocode/".concat(e,".JSON?key=").concat(a);return b.a.get(t).then((function(e){return e.data})).then((function(t){var a=t.results;if(a&&a.length>0){var r=a[0].position;return function(e,t){var a=c(e);n.current[a]=t}(e,r),r}return Promise.reject("Location not Found")})).catch((function(){return Promise.reject("Location not Found")}))},o={initMap:function(){var e=Ht.a.map({key:a,container:"freshbnb-map",style:"tomtom://vector/1/basic-main",zoom:15});return e.addControl(new Ht.a.NavigationControl),e},getGeoPosition:function(e){var t=function(e){var t=c(e);return n.current[t]}(e);return t?Promise.resolve(t):i(e)},setCenter:function(e,t){e.setCenter(new Ht.a.LngLat(t.lon,t.lat))},addMarker:function(e,t){var a=document.createElement("div");a.className="freshbnb-marker",new Ht.a.Marker({element:a}).setLngLat([t.lon,t.lat]).addTo(e)},addPopupMessage:function(e,t){new Ht.a.Popup({className:"freshbnb-popup",closeButton:!1,closeOnClick:!1}).setLngLat(new Ht.a.LngLat(0,0)).setHTML("<p>".concat(t,"</p>")).addTo(e)}};return l.a.createElement(zt.Provider,{value:o},t)},Jt=function(e){var t=e.location,a=Object(r.useRef)(null),n=$t(zt),c=Object(r.useCallback)((function(e){var t="".concat(e.city,",").concat(e.street);n.getGeoPosition(t).then((function(e){n.setCenter(a.current,e),n.addMarker(a.current,e)})).catch((function(e){return n.addPopupMessage(a.current,e)}))}),[]);return Object(r.useEffect)((function(){c(t)}),[t,c]),Object(r.useEffect)((function(){a.current=n.initMap()}),[]),l.a.createElement("div",{id:"freshbnb-map"})},Xt=a(53),Qt=function(e){var t=e.open,a=e.onCloseModal,n=e.city,r=e.street,c=e.getFormmatedDate,i=e.getNumberOfGuests,o=e.price,s=e.reserveRental,u=e.nights,m=e.totalPrice;return l.a.createElement(Xt.a,{focusTrapped:!1,open:t,onClose:function(){return a()},center:!0},l.a.createElement("div",{className:"modal__header"},l.a.createElement("h2",null,"Reserve Summary")),l.a.createElement("div",{className:"modal__body"},l.a.createElement("h3",null,l.a.createElement(ue.a,null),n,", ",r),l.a.createElement("h4",null,l.a.createElement("em",null,u," ")," Nights /",l.a.createElement("em",null," $",o)," per Night"),l.a.createElement("p",null,"Between ",c()),l.a.createElement("p",null,"With ",i()," guests"),l.a.createElement("h5",null,"Total Price: ",l.a.createElement("span",null,"$",m))),l.a.createElement("div",{className:"modal__footer"},l.a.createElement("button",{className:"button",type:"button",onClick:function(){return s()}},"Confirm")))},ea=a(220),ta=Object(ea.extendMoment)(E.a),aa={getBookings:function(e){return function(){var t=Object(ct.a)(lt.a.mark((function t(a){var n;return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,gt.getByRental(e);case 3:n=t.sent,a({type:"SET_BOOKINGS",payload:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},addBooking:function(e){return function(){var t=Object(ct.a)(lt.a.mark((function t(a){var n;return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,gt.add(e);case 3:n=t.sent,a({type:"ADD_BOOKING",payload:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"SET_ERRORS",payload:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},na=Object(u.b)((function(e){return{bookings:e.bookingsApp.bookings,user:e.authApp.user,isAuth:e.authApp.isAuth}}),aa)((function(e){var t=e.dailyPrice,a=(e.star,e.city),n=e.street,c=e.rental,i=e.getBookings,o=e.addBooking,s=e.bookings,u=e.user,m=e.isAuth,p=e.rate,d=e.length,E=Object(r.useState)(!1),v=Object(S.a)(E,2),f=v[0],g=v[1],h=Object(r.useState)(""),b=Object(S.a)(h,2),y=b[0],_=b[1],N=Object(r.useState)(null),O=Object(S.a)(N,2),w=O[0],j=O[1],R=Object(r.useState)(null),k=Object(S.a)(R,2),x=k[0],A=k[1],I=Object(r.useState)(0),B=Object(S.a)(I,2),L=B[0],D=B[1],T=Object(r.useState)(0),P=Object(S.a)(T,2),M=P[0],q=P[1],U=Object(r.useRef)(null);Object(r.useEffect)((function(){i(c)}),[i,c]);var F=""!==y&&w&&x,G=function(){return g(!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"rentalDetail__body-right"},l.a.createElement("div",{className:"rentalDetail__priceCard"},l.a.createElement("h3",null,"$",t,"/ night"),l.a.createElement("div",{className:"rentalDetail__priceCard-rating"},l.a.createElement(Y.a,{className:"rentalDetail__star"}),l.a.createElement("span",null,p.toFixed(1)),l.a.createElement("span",null,"(",d,")"))),l.a.createElement("div",{className:"rentalDetail__specs"},l.a.createElement(Vt.a,{onApply:function(e,a){var n=a.startDate,r=a.endDate;U.current.value=ta(n).format("DD/MM/YYYY")+" to "+ta(r).format("DD/MM/YYYY"),j(n),A(r);var l=ta.range(n,r),c=Array.from(l.by("days")).length-1;D(c),q(t*c)},isInvalidDate:function(e){var t;return t=null===s||void 0===s?void 0:s.some((function(t){return ta.range(t.startAt,t.endAt).contains(e)})),e<ta().add(-1,"days")||t}},l.a.createElement("input",{id:"dates",type:"text",ref:U,placeholder:"Pick Dates"})),l.a.createElement("input",{type:"number",placeholder:"Number of Guests",value:y,onChange:function(e){return _(parseInt(e.target.value))}})),l.a.createElement(Jt,{location:{city:a,street:n}}),u&&m?l.a.createElement("button",{className:"rentalDetail__priceCard-button",onClick:function(){return g(!0)},disabled:!F},"Reserve"):l.a.createElement(C.b,{to:"/login"},l.a.createElement("button",{className:"rentalDetail__priceCard-button"},"Login to Book this Place"))),l.a.createElement(Qt,{open:f,onCloseModal:G,city:a,street:n,getFormmatedDate:function(){return U.current?U.current.value:""},getNumberOfGuests:function(){return""===y?0:y},price:t,reserveRental:function(){o({startAt:w,endAt:x,guests:y,nights:L,price:M,rental:c}),G(),_(""),U.current.value="",j(null),A(null)},nights:L,totalPrice:M}))})),ra=a(395),la=function(e){var t=e.review;return l.a.createElement("div",{className:"reviews__card"},l.a.createElement("h3",null,t.user),l.a.createElement(ra.a,{name:"read-only",value:t.rate,readOnly:!0,className:"reviews__card-icon",precision:.1}),l.a.createElement("h5",null,E()(t.createdAt).fromNow()),l.a.createElement("p",null,t.text))},ca=Object(u.b)((function(e){return{reviews:e.reviewsApp.reviews}}),null)((function(e){var t=e.reviews;return l.a.createElement("div",{className:"reviews__container"},(null===t||void 0===t?void 0:t.length)?l.a.createElement("div",{className:"reviews__list"},t.map((function(e){return l.a.createElement(la,{key:e._id,review:e})}))):l.a.createElement("span",{className:"no-reviews"},"Currently There are No Reviews"))})),ia=function(){return l.a.createElement("div",{className:"rentalDetail__assets"},l.a.createElement("div",null,l.a.createElement(V.a,null)," ",l.a.createElement("span",null,"Cooling")),l.a.createElement("div",null,l.a.createElement(H.a,null)," ",l.a.createElement("span",null,"Heating")),l.a.createElement("div",null,l.a.createElement($.a,null)," ",l.a.createElement("span",null,"Free Wifi")),l.a.createElement("div",null,l.a.createElement(Z.a,null)," ",l.a.createElement("span",null,"Working Area")),l.a.createElement("div",null,l.a.createElement(X.a,null)," ",l.a.createElement("span",null,"Pool")),l.a.createElement("div",null,l.a.createElement(ee.a,null)," ",l.a.createElement("span",null,"Play Room")),l.a.createElement("div",null,l.a.createElement(ae.a,null)," ",l.a.createElement("span",null,"Fitness Center")),l.a.createElement("div",null,l.a.createElement(re.a,null)," ",l.a.createElement("span",null,"Private Beach")),l.a.createElement("div",null,l.a.createElement(ce.a,null)," ",l.a.createElement("span",null,"Airport Shuttle")))},oa={addReview:function(e,t){return function(){var a=Object(ct.a)(lt.a.mark((function a(n){var r;return lt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,qt.add(e);case 3:r=a.sent,n({type:"ADD_REVIEW",payload:{review:r,rate:t}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}},sa=Object(u.b)((function(e){return{user:e.authApp.user,reviews:e.reviewsApp.reviews}}),oa)((function(e){var t=e.open,a=e.onCloseModal,n=e.user,c=e.rental,i=e.addReview,o=e.reviews,s=Object(r.useState)(n?n.username:"Guest"),u=Object(S.a)(s,2),m=u[0],p=(u[1],Object(r.useState)("")),d=Object(S.a)(p,2),E=d[0],v=d[1],f=Object(r.useState)(1),g=Object(S.a)(f,2),h=g[0],b=g[1];return l.a.createElement(Xt.a,{focusTrapped:!1,open:t,onClose:function(){return a()},center:!0},l.a.createElement("div",{className:"modal__header"},l.a.createElement("h2",null,"Add Review")),l.a.createElement("div",{className:"modal__body"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={user:m,rental:c._id,text:E,rate:h},n=null===o||void 0===o?void 0:o.map((function(e){return e.rate}));n.push(h);var r=n.reduce((function(e,t){return e+t}),0)/n.length;i(t,r),a()}},l.a.createElement("div",{className:"add__review-top"},l.a.createElement("label",null,"Choose Your Rate"),l.a.createElement(ra.a,{precision:.1,name:"rental-rate",className:"reviews__card-icon",value:h,onChange:function(e,t){b(t)}})),l.a.createElement("div",{className:"inputs"},l.a.createElement("div",{className:"input"},l.a.createElement("input",{type:"text",placeholder:"Name",value:m,readOnly:!0})),l.a.createElement("div",{className:"input"},l.a.createElement("textarea",{rows:"8",type:"text",placeholder:"Write your review",value:E,onChange:function(e){return v(e.target.value)}}))),l.a.createElement(vt,{type:"submit",text:"Submit"}))))})),ua=function(e){var t=e.description,a=e.shared,n=e.category,c=e.numOfRooms,i=e.owner,o=e.rental,s=Object(r.useState)(!1),u=Object(S.a)(s,2),m=u[0],p=u[1];return l.a.createElement("div",{className:"rentalDetail__body-left"},l.a.createElement("div",{className:"rentalDetail__body-top"},l.a.createElement("div",null,l.a.createElement("p",{className:"rentalDetail__body-description"},t),l.a.createElement("small",null,a&&"Shared"," ",n," with ",c," ",l.a.createElement("span",null,"rooms"))),l.a.createElement("p",{className:"rentalDetail__body-host"},l.a.createElement(Le.a,null)," Host ",l.a.createElement("span",null,i.username))),l.a.createElement(ia,null),l.a.createElement("hr",null),l.a.createElement("div",{className:"reviews__header"},l.a.createElement("h2",null,"Reviews"),l.a.createElement("button",{onClick:function(){return p(!0)}},"Add Review")),l.a.createElement(sa,{onCloseModal:function(){return p(!1)},open:m,rental:o}),l.a.createElement(ca,null))},ma={loadRental:function(e){return function(){var t=Object(ct.a)(lt.a.mark((function t(a){var n;return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ot.getById(e);case 3:n=t.sent,a({type:"SET_RENTAL",payload:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},clearRental:function(){return function(){var e=Object(ct.a)(lt.a.mark((function e(t){return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"CLEAR_RENTAL"})}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getReviews:function(e){return function(){var t=Object(ct.a)(lt.a.mark((function t(a){var n;return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qt.getByRental(e);case 3:n=t.sent,a({type:"SET_REVIEWS",payload:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},pa=Object(u.b)((function(e){return{rental:e.mainApp.rental,reviews:e.reviewsApp.reviews,rate:e.reviewsApp.rate}}),ma)((function(e){var t=e.match,a=e.loadRental,n=e.clearRental,c=e.rental,i=e.getReviews,o=e.reviews,s=e.rate;return Object(r.useEffect)((function(){var e=t.params.id;return a(e),i(e),function(){n()}}),[a,n,i]),l.a.createElement("div",{className:"rentalDetail"},c?l.a.createElement(l.a.Fragment,null,l.a.createElement(Ft,{margin:"m-0"}),l.a.createElement(Yt,{title:null===c||void 0===c?void 0:c.title,star:null===c||void 0===c?void 0:c.star,city:null===c||void 0===c?void 0:c.city,street:null===c||void 0===c?void 0:c.street,rate:s,length:null===o||void 0===o?void 0:o.length}),l.a.createElement(Ut,{coverImage:null===c||void 0===c?void 0:c.image.url,images:null===c||void 0===c?void 0:c.images}),l.a.createElement("div",{className:"rentalDetail__body"},l.a.createElement(ua,{description:null===c||void 0===c?void 0:c.description,category:null===c||void 0===c?void 0:c.category,shared:null===c||void 0===c?void 0:c.shared,numOfRooms:null===c||void 0===c?void 0:c.numOfRooms,owner:null===c||void 0===c?void 0:c.owner,rental:c}),l.a.createElement(na,{dailyPrice:null===c||void 0===c?void 0:c.dailyPrice,star:null===c||void 0===c?void 0:c.star,city:null===c||void 0===c?void 0:c.city,street:null===c||void 0===c?void 0:c.street,rental:null===c||void 0===c?void 0:c._id,rate:s,length:null===o||void 0===o?void 0:o.length}))):l.a.createElement(tt,null))})),da=function(){return l.a.createElement("div",null,l.a.createElement("p",null,"Hello Profile Page"))},Ea=function(){return l.a.createElement(C.b,{to:"/manage"},l.a.createElement("div",{className:"rentalDetail__back"},l.a.createElement(oe.a,{className:"rentalDetail__back-icon"}),l.a.createElement("span",null,"Back to Manage Page")))},va={addRental:function(e){return function(){var t=Object(ct.a)(lt.a.mark((function t(a){var n;return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n=ot.add(e),a({type:"ADD_RENTAL",payload:n})}catch(r){console.log(r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},fa=Object(u.b)(null,va)((function(e){var t=e.addRental,a=Object(s.g)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ea,null),l.a.createElement("div",{className:"addRental__container"},l.a.createElement("div",{className:"addRental__header"},l.a.createElement("p",null,"Create New Rental")),l.a.createElement("div",{className:"addRental__body"},l.a.createElement(It,{onSubmit:function(e){e.shared=!0;var n=e.title,r=e.city,l=e.street,c=e.category,i=e.image,o=e.numOfRooms,s=e.description,u=e.shared,m=e.dailyPrice,p={title:n,city:r,street:l,category:c,image:i,images:[e.image1,e.image2,e.image3,e.image4],numOfRooms:parseInt(o),shared:u,description:s,dailyPrice:parseInt(m)};t(p),a.push("/")}}))))})),ga=function(){var e=Object(s.g)();return l.a.createElement("div",{className:"manage"},l.a.createElement("div",{className:"manage__navigation"},l.a.createElement("button",{onClick:function(){return e.push("manage/add")}},"New Rental"),l.a.createElement("button",{onClick:function(){return e.push("manage/rentals")}},"My Rentals"),l.a.createElement("button",{onClick:function(){return e.push("manage/bookings")}},"My Bookings"),l.a.createElement("button",{onClick:function(){return e.push("/manage/received")}},"Received Bookings")))},ha=_.freshbnbAxios,ba={queryRentals:function(){var e=Object(ct.a)(lt.a.mark((function e(){var t;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ha.get("/rentals/me");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),queryBookings:function(){var e=Object(ct.a)(lt.a.mark((function e(){var t;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ha.get("/bookings/me");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),queryRecievedBookings:function(){var e=Object(ct.a)(lt.a.mark((function e(){var t;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ha.get("/bookings/received");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),deleteRental:function(){var e=Object(ct.a)(lt.a.mark((function e(t){var a;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ha.delete("/rentals/".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(v(e.t0.response||{})));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),deleteBooking:function(){var e=Object(ct.a)(lt.a.mark((function e(t){var a;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ha.delete("/bookings/".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(v(e.t0.response||{})));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),updateRental:function(){var e=Object(ct.a)(lt.a.mark((function e(t,a){var n;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ha.patch("/rentals/".concat(a),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(v(e.t0.response||{})));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()},ya={updateMyRental:function(e,t){return function(){var a=Object(ct.a)(lt.a.mark((function a(n){var r;return lt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ba.updateRental(e,t);case 3:r=a.sent,n({type:"UPDATE_MY_RENTAL",payload:r}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n({type:"SET_ERRORS",payload:a.t0});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}},_a=Object(u.b)(null,ya)((function(e){var t=e.open,a=e.onCloseModal,n=e.rental,r=e.updateMyRental;return l.a.createElement(Xt.a,{focusTrapped:!1,open:t,onClose:function(){return a()},center:!0},l.a.createElement("div",{className:"modal__header"},l.a.createElement("h2",null,"Update Rental")),l.a.createElement("div",{className:"modal__body"},l.a.createElement(Dt,{onSubmit:function(e,t){e.preventDefault(),t.shared=!0,r(t,n._id),a()},rentalToUpdate:n})))})),Na={deleteMyRental:function(e){return function(){var t=Object(ct.a)(lt.a.mark((function t(a){return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ba.deleteRental(e);case 3:a({type:"DELETE_MY_RENTAL",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),a({type:"SET_ERRORS",payload:t.t0});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}},Oa=Object(u.b)(null,Na)((function(e){var t=e.rental,a=e.deleteMyRental,n=Object(r.useState)(!1),c=Object(S.a)(n,2),i=c[0],o=c[1],s=function(){return window.confirm("Are you sure you want to delete this rental?")};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"browseItem"},l.a.createElement("div",{className:"browseItem__head"},l.a.createElement("img",{src:t.image.url,alt:""}),l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){return e=t._id,void(s()&&a(e));var e}},"Delete"),l.a.createElement("button",{onClick:function(){return o(!0)},className:"accept__btn"},"Update"))),l.a.createElement(C.b,{to:"/rentals/".concat(t._id),id:"item"},l.a.createElement(U.a,{className:"browseItem__heart"}),l.a.createElement("div",{className:"browseItem__info"},l.a.createElement("div",{className:"browseItem__infoTop"},l.a.createElement("p",{className:"browseItem__city"},l.a.createElement(ue.a,{className:"browseItem__city-icon"}),t.street,", ",t.city," "),l.a.createElement("h3",null,t.title),l.a.createElement("p",{className:"browseItem__category"},t.shared?"Shared ":"",t.category),l.a.createElement("p",null,"____"),l.a.createElement("p",null,t.description)),l.a.createElement("div",{className:"browseItem__infoBottom"},l.a.createElement("div",{className:"browseItem__stars"},l.a.createElement(Y.a,{className:"browseItem__star"}),l.a.createElement("p",null,l.a.createElement("strong",null,t.star," ",l.a.createElement("span",null,"(185)")))),l.a.createElement("div",{className:"browseItems__price"},l.a.createElement("h2",null,l.a.createElement("span",null,t.dailyPrice,"$")," / night"),l.a.createElement("p",null,t.numOfRooms," Rooms Available")))))),l.a.createElement(_a,{open:i,onCloseModal:function(){return o(!1)},rental:t}))})),wa={loadMyRentals:function(){return function(){var e=Object(ct.a)(lt.a.mark((function e(t){var a;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ba.queryRentals();case 3:a=e.sent,t({type:"SET_MY_RENTALS",payload:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},clearMyRentals:function(){return function(){var e=Object(ct.a)(lt.a.mark((function e(t){return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"CLEAR_MY_RENTALS"})}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},ja=Object(u.b)((function(e){return{myRentals:e.manageApp.myRentals}}),wa)((function(e){var t=e.loadMyRentals,a=e.clearMyRentals,n=e.myRentals;Object(r.useEffect)((function(){return t(),function(){a()}}),[t,a]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ea,null),l.a.createElement("h2",{className:"manage__title"},"My Rentals"),l.a.createElement("div",{className:"browseList"},null===n||void 0===n?void 0:n.map((function(e,t){return l.a.createElement(Oa,{rental:e,key:t})})),null===n?l.a.createElement(tt,null):(null===n||void 0===n?void 0:n.length)?void 0:l.a.createElement("h1",{className:"no-rentals"},"There Is No Rentals")))})),Ra=a(43),ka=a.n(Ra),xa={deleteMyBooking:function(e){return function(){var t=Object(ct.a)(lt.a.mark((function t(a){return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ba.deleteBooking(e);case 3:a({type:"DELETE_MY_BOOKING",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),a({type:"SET_ERRORS",payload:t.t0});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}},Aa=Object(u.b)(null,xa)((function(e){var t=e.booking,a=e.deleteMyBooking,n=function(){return window.confirm("Are you sure you want to delete this rental?")};return l.a.createElement("div",{className:"MyBookingsItem"},l.a.createElement("div",{className:"MyBookingsItem__img"},l.a.createElement("img",{src:t.rental.image.url,alt:""}),l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){return e=t._id,void(n()&&a(e));var e}},"Cancel"))),l.a.createElement(C.b,{to:"/rentals/".concat(t.rental._id)},l.a.createElement("div",{className:"MyBookingsItem__body"},l.a.createElement("h2",null,t.rental.title),l.a.createElement("div",{className:"MyBookingsItem__body-specs"},l.a.createElement("div",null,l.a.createElement(Te.a,null),l.a.createElement("span",null,l.a.createElement(ka.a,{format:"L"},t.startAt),l.a.createElement("span",null," to "),l.a.createElement(ka.a,{format:"L"},t.endAt))),l.a.createElement("div",null,l.a.createElement(Me.a,null)," ",l.a.createElement("span",null,t.nights," Nights")),l.a.createElement("div",null,l.a.createElement(M.a,null)," ",l.a.createElement("span",null,t.guests," People")),l.a.createElement("div",null,l.a.createElement(Ue.a,null),l.a.createElement("span",null,"Booked In ",l.a.createElement(ka.a,{format:"ll"},t.createdAt)))),l.a.createElement("p",null,"Total Price: ",l.a.createElement("span",null,"$",t.price)))))})),Ca={loadMyBookings:function(){return function(){var e=Object(ct.a)(lt.a.mark((function e(t){var a;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ba.queryBookings();case 3:a=e.sent,t({type:"SET_MY_BOOKINGS",payload:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},clearMyBookings:function(){return function(){var e=Object(ct.a)(lt.a.mark((function e(t){return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"CLEAR_MY_BOOKINGS"})}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Sa=Object(u.b)((function(e){return{myBookings:e.manageApp.myBookings}}),Ca)((function(e){var t=e.myBookings,a=e.loadMyBookings,n=e.clearMyBookings;Object(r.useEffect)((function(){return a(),function(){n()}}),[a,n]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ea,null),l.a.createElement("h2",{className:"manage__title"},"My Bookings"),l.a.createElement("div",{className:"MyBookingsItem__container"},null===t||void 0===t?void 0:t.map((function(e){return l.a.createElement(Aa,{key:e._id,booking:e})})),null===t?l.a.createElement(tt,null):(null===t||void 0===t?void 0:t.length)?void 0:l.a.createElement("h1",{className:"no-rentals"},"There Is No Bookings")))})),Ia=function(e){var t=e.booking;return l.a.createElement("div",{className:"MyBookingsItem"},l.a.createElement("div",{className:"MyBookingsItem__img"},l.a.createElement("img",{src:t.rental.image.url,alt:""})),l.a.createElement(C.b,{to:"/rentals/".concat(t.rental._id)},l.a.createElement("div",{className:"MyBookingsItem__body"},l.a.createElement("h2",null,t.rental.title),l.a.createElement("div",{className:"MyBookingsItem__body-specs"},l.a.createElement("div",null,l.a.createElement(Te.a,null),l.a.createElement("span",null,l.a.createElement(ka.a,{format:"L"},t.startAt),l.a.createElement("span",null," to "),l.a.createElement(ka.a,{format:"L"},t.endAt))),l.a.createElement("div",null,l.a.createElement(Me.a,null)," ",l.a.createElement("span",null,t.nights," Nights")),l.a.createElement("div",null,l.a.createElement(M.a,null)," ",l.a.createElement("span",null,t.guests," People")),l.a.createElement("div",null,l.a.createElement(Ue.a,null),l.a.createElement("span",null,"Booked In ",l.a.createElement(ka.a,{format:"ll"},t.createdAt)))),l.a.createElement("p",null,"Total Price: ",l.a.createElement("span",null,"$",t.price)))))},Ba={loadReceivedBookings:function(){return function(){var e=Object(ct.a)(lt.a.mark((function e(t){var a;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ba.queryRecievedBookings();case 3:a=e.sent,t({type:"SET_RECEIVED_BOOKINGS",payload:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},clearReceivedBookings:function(){return function(){var e=Object(ct.a)(lt.a.mark((function e(t){return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"CLEAR_RECEIVED_BOOKINGS"})}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},La=Object(u.b)((function(e){return{receivedBookings:e.manageApp.receivedBookings}}),Ba)((function(e){var t=e.receivedBookings,a=e.loadReceivedBookings,n=e.clearReceivedBookings;Object(r.useEffect)((function(){return a(),function(){n()}}),[a,n]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ea,null),l.a.createElement("h2",{className:"manage__title"},"Pending Bookings"),l.a.createElement("div",{className:"MyBookingsItem__container"},null===t||void 0===t?void 0:t.map((function(e){return l.a.createElement(Ia,{key:e._id,booking:e})})),null===t?l.a.createElement(tt,null):(null===t||void 0===t?void 0:t.length)?void 0:l.a.createElement("h1",{className:"no-rentals"},"There Is No Bookings")))})),Da=function(){var e=k();return Object(r.useEffect)((function(){e.checkAuthState()}),[e]),l.a.createElement(C.a,null,l.a.createElement(Ke,null),l.a.createElement(yt,null),l.a.createElement(s.d,null,l.a.createElement(s.b,{exact:!0,path:"/:location/browse",component:pt}),l.a.createElement(x,{exact:!0,path:"/profile",component:da}),l.a.createElement(x,{exact:!0,path:"/manage",component:ga}),l.a.createElement(x,{exact:!0,path:"/manage/rentals",component:ja}),l.a.createElement(x,{exact:!0,path:"/manage/bookings",component:Sa}),l.a.createElement(x,{exact:!0,path:"/manage/received",component:La}),l.a.createElement(x,{exact:!0,path:"/manage/add",component:fa}),l.a.createElement(A,{exact:!0,path:"/login",component:Tt}),l.a.createElement(A,{exact:!0,path:"/register",component:Pt}),l.a.createElement(s.b,{exact:!0,path:"/rentals/:id",component:pa}),l.a.createElement(s.b,{exact:!0,path:"/",component:nt})),l.a.createElement(He,null),l.a.createElement(We,null))},Ta=a(46),Pa=a(221),Ma=a(222),qa={rentals:null,rental:null};var Ua={user:null,isAuth:!1};var Fa={bookings:[],errors:null};var Ya={myRentals:null,myBookings:null,receivedBookings:null};var Ga={reviews:null,rate:0};var Va=Object(Ta.combineReducers)({mainApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RENTALS":return Object(Bt.a)(Object(Bt.a)({},e),{},{rentals:t.payload});case"SET_RENTAL":return Object(Bt.a)(Object(Bt.a)({},e),{},{rental:t.payload});case"CLEAR_RENTAL":return Object(Bt.a)(Object(Bt.a)({},e),{},{rental:null});case"CLEAR_RENTALS":return Object(Bt.a)(Object(Bt.a)({},e),{},{rentals:null});case"ADD_RENTAL":return Object(Bt.a)(Object(Bt.a)({},e),{},{rentals:[].concat(Object(Lt.a)(e.rentals),[t.payload])});default:return e}},authApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_AUTHENTICATED":return Object(Bt.a)(Object(Bt.a)({},e),{},{user:t.payload,isAuth:!0});case"USER_LOGOUT":return Object(Bt.a)(Object(Bt.a)({},e),{},{user:null,isAuth:!1});default:return e}},bookingsApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOKINGS":return Object(Bt.a)(Object(Bt.a)({},e),{},{bookings:t.payload});case"ADD_BOOKING":return Object(Bt.a)(Object(Bt.a)({},e),{},{bookings:[].concat(Object(Lt.a)(e.bookings),[t.payload])});case"SET_ERRORS":return Object(Bt.a)(Object(Bt.a)({},e),{},{errors:t.payload});default:return e}},manageApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MY_RENTALS":return Object(Bt.a)(Object(Bt.a)({},e),{},{myRentals:t.payload});case"CLEAR_MY_RENTALS":return Object(Bt.a)(Object(Bt.a)({},e),{},{myRentals:null});case"SET_MY_BOOKINGS":return Object(Bt.a)(Object(Bt.a)({},e),{},{myBookings:t.payload});case"CLEAR_MY_BOOKINGS":return Object(Bt.a)(Object(Bt.a)({},e),{},{myBookings:null});case"SET_RECEIVED_BOOKINGS":return Object(Bt.a)(Object(Bt.a)({},e),{},{receivedBookings:t.payload});case"CLEAR_RECEIVED_BOOKINGS":return Object(Bt.a)(Object(Bt.a)({},e),{},{receivedBookings:null});case"DELETE_MY_RENTAL":return Object(Bt.a)(Object(Bt.a)({},e),{},{myRentals:e.myRentals.filter((function(e){return e._id!==t.payload}))});case"UPDATE_MY_RENTAL":return Object(Bt.a)(Object(Bt.a)({},e),{},{myRentals:e.myRentals.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"DELETE_MY_BOOKING":return Object(Bt.a)(Object(Bt.a)({},e),{},{myBookings:e.myBookings.filter((function(e){return e._id!==t.payload}))});default:return e}},reviewsApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ga,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_REVIEWS":var a=t.payload.map((function(e){return e.rate}));return Object(Bt.a)(Object(Bt.a)({},e),{},{reviews:t.payload,rate:a.reduce((function(e,t){return e+t}),0)/a.length});case"ADD_REVIEW":return Object(Bt.a)(Object(Bt.a)({},e),{},{reviews:[t.payload.review].concat(Object(Lt.a)(e.reviews)),rate:t.payload.rate});default:return e}}}),Ka=Object(Ta.createStore)(Va,Object(Pa.composeWithDevTools)(Object(Ta.applyMiddleware)(Ma.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(375),a(376),a(377),a(378),a(379);i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(u.a,{store:Ka},l.a.createElement(R,null,l.a.createElement(Zt,{apiKey:"kDI19PqRKAXBaTC2LC7Wu1tRMPqM9SwG"},l.a.createElement(ht.a,{draggable:!1,transition:ht.b,autoClose:5e3,position:"top-center"}),l.a.createElement(Da,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[234,1,2]]]);
//# sourceMappingURL=main.38638bff.chunk.js.map